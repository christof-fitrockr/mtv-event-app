<div class="container mt-4">
  <h2 *ngIf="isNew">Add New Event</h2>
  <h2 *ngIf="!isNew">Edit Event</h2>
  <form (ngSubmit)="saveEvent()">
    <div class="mb-3">
      <label for="name" class="form-label">Name</label>
      <input type="text" class="form-control" id="name" [(ngModel)]="event.name" name="name" required>
    </div>
    <div class="mb-3">
      <label for="location" class="form-label">Location</label>
      <select class="form-select" id="location" [(ngModel)]="event.locationId" name="location" required>
        <option *ngFor="let location of locations" [value]="location.id">{{ location.name }}</option>
      </select>
    </div>
    <div class="mb-3">
      <label for="description" class="form-label">Description</label>
      <editor
        [init]="tinymceConfig"
        apiKey="no-api-key"
        [(ngModel)]="event.description"
        name="description"
      ></editor>
    </div>
    <div class="mb-3">
      <label for="startDate" class="form-label">Start Date</label>
      <input type="date" class="form-control" id="startDate" [(ngModel)]="event.startDate" name="startDate" required>
    </div>
    <div class="mb-3">
      <label for="endDate" class="form-label">End Date</label>
      <input type="date" class="form-control" id="endDate" [(ngModel)]="event.endDate" name="endDate" required>
    </div>

    <hr>

    <h4>Scheduling</h4>
    <div class="card card-body mb-3">
      <div class="row">
        <div class="col-md-4">
          <label class="form-label">Day of Week</label>
          <select class="form-select" [(ngModel)]="newSchedule.day" name="newScheduleDay">
            <option>Monday</option>
            <option>Tuesday</option>
            <option>Wednesday</option>
            <option>Thursday</option>
            <option>Friday</option>
            <option>Saturday</option>
            <option>Sunday</option>
          </select>
        </div>
        <div class="col-md-3">
          <label class="form-label">Start Time</label>
          <input type="time" class="form-control" [(ngModel)]="newSchedule.startTime" name="newScheduleStartTime">
        </div>
        <div class="col-md-3">
          <label class="form-label">End Time</label>
          <input type="time" class="form-control" [(ngModel)]="newSchedule.endTime" name="newScheduleEndTime">
        </div>
        <div class="col-md-2 d-flex align-items-end">
          <button type="button" class="btn btn-success w-100" (click)="addSchedule()">Add Slot</button>
        </div>
      </div>
    </div>

    <h5>Scheduled Slots</h5>
    <ul class="list-group mb-4">
      <li *ngIf="event.schedule.length === 0" class="list-group-item">No schedule slots added yet.</li>
      <li *ngFor="let slot of event.schedule; let i = index" class="list-group-item d-flex justify-content-between align-items-center">
        <span>{{ slot.day }} from {{ slot.startTime }} to {{ slot.endTime }}</span>
        <button type="button" class="btn btn-sm btn-danger" (click)="removeSchedule(i)">Remove</button>
      </li>
    </ul>

    <button type="submit" class="btn btn-primary">Save</button>
    <button type="button" class="btn btn-secondary ms-2" [routerLink]="['/admin/events']">Cancel</button>
  </form>
</div>
